@model List<Type>

<div id="principal">
    <div id="ModalAguarde" class="modal fade" role="dialog" show="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <p class="modal-title">Montando Objeto</p>
                </div>
                <div class="modal-body" style="text-align:center">
                    <img src="..//Content/aguarde.gif" alt="aguarde gif" width="25px" height="25px"/>
                    <p>Aguarde...</p>
                </div>
            </div>
        </div>
    </div>
    <div id="home-header">
        <h1>Serviços Disponíveis</h1>
    </div>

    <div id="home-opçoes">

        <div class="panel panel-default">

            <div class="panel-body">
                @using (Html.BeginForm("Index", "Render", FormMethod.Post))
                {
                <div class="form-group">
                    <label>Serviços<span>*</span></label>
                    <select name="nomeInterface" id="servico" class="form-control">
                        <option></option>
                        @foreach (var servico in Model)
                        {
                            <option>@servico.Namespace.Split('.')[2]</option>
                        }
                    </select>
                </div>
                <div class="form-group combo-capacidades">
                    <label>
                        Capacidades<span>*</span></label>
                    <select name="nomeMetodo" id="capacidades" class="form-control">
                        <option class="primeira"></option>
                        
                    </select>
                </div>
                <div class="botao-solicitar">
                    <input type="submit" value="Solicitar" id="catalogo-solicitar" class="botao-padrao" />
                </div>
                }
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#catalogo-solicitar').click(function () {
            $('#ModalAguarde').modal();
        });

        $('.combo-capacidades').hide();
        $('.botao-solicitar').hide();

        console.log($("#servico").val());

        $("#servico").change(function () {
            $.getJSON('@Url.Action("SelecionaServico")', { nomeInterface: $("#servico").val() }, function (data) {
                $('.volatil').remove();
                $.each(data, function (i, item) {
                    var conteudo = ('<option class="volatil">' + data[i] + '</option>');
                    $('#capacidades').append($(conteudo));
                });
            });

            if ($("#servico").val() != "") {
                $('.combo-capacidades').show();
            }
            else {
                $('.volatil').remove();
                $('.combo-capacidades').hide();
            }
        });

        $("#capacidades").change(function () {
            if ($("#capacidades").val() != "") {
                $('.botao-solicitar').show();
            }
            else {
                $('.botao-solicitar').hide();
            }
        });
    });
</script>

